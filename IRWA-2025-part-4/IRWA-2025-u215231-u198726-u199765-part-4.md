# Project Part 4 Report:
Information Retrieval And Web Analysis 2025

---

Date: 04/12/2025								 
Group Identifier: G_007									
Group Member 1: Marc Bosch Manzano u215231  
Group Member 2: Chris Matienzo Chilo u198726  
Group Member 3: Àlex Roger Moya u199765  

This file was edited with Markdown language.

---

## 1. Introducción

En esta cuarta parte del proyecto, en lugar de recuperar documentos, nos centramos en construir una web funcional, un Retrieval-Augmented Generation (RAG) que resume la información del resultado, y por último, un sistema de analíticas que almacena las interacciones con los usuarios que visitan la web.

La idea de este proyecto fue unir este flujo de una forma coherente, de forma que el usuario al formular una búsqueda:

- Sistema procese la búsqueda.
- Devuelva la información indexada.
- Genera un resumen del resultado.
- Registra cada interacción.

De este modo, la aplicación no solo responde, sino que retiene información valiosa para la analítica de la web.

## 2. User Interface (UI)

Para la interfaz de la web intentamos otorgar al usuario la información más relevante y coherente con la búsqueda.

### 2.1. Estructura general de la UI

La aplicación se organiza en tres páginas principales:

- **Home (`/`)**: La página de inicio donde el usuario introduce la consulta.
- **Results (`/search`)**: Muestra los documentos recuperados, ordenados según el ranking definido por el motor de búsqueda. Aquí también aparece el resumen generado mediante RAG.
- **Document Details (`/doc_details`)**: Al hacer clic sobre un resultado, el usuario accede a una vista más detallada del producto, incluyendo:
    - Category
    - Title
    - Brand
    - Rating
    - Price
    - Discount
    - Description
    - Image product

### 2.2. Flujo de interacción del usuario

El usuario plantea una query y recibe un conjunto de documentos acompañados por un resumen generado (RAG). Al acceder a un documento (`/doc_details`), se registra como un clic dentro del sistema de analíticas (apartado Stats) para luego mostrar, en un dashboard, las métricas del historial del usuario.

## 3. **Retrieval-Augmented Generation (RAG)**

Una vez construido el flujo de búsqueda y la interfaz, incorporamos el módulo de Retrieval-Augmented Generation, que actúa como un puente entre los resultados del motor y una respuesta más natural para el usuario. La idea es que el usuario no tenga que leer las descripciones (resultados), sino que genere una síntesis clara de la diferencia entre los productos y si realmente se ajustan a su búsqueda.

`----------------------POR COMPLETAR...----------------------`

## 4. Web Analytics

La tercera parte del proyecto consistió en un sistema de analítica capaz de observar cómo interactúan los usuarios con el buscador, haciendo un seguimiento de las consultas que realizaba, qué documentos interesan más, qué rutas del servidor reciben más tráfico y cómo evoluciona una sesión desde que el usuario llega hasta que abandona la web.

`analytics_data.py`: Almacena la información en memoria la siguiente información:

1. **Request**: Registra cada petición HTTP que llega al servidor, como ruta, IP, navegador y marca temporal. Esta tabla permite identificar qué páginas se visitan más y desde qué dispositivos.
2. **Sessions**: Almacena un identificador único por sesión y su timestamp inicial. De esta forma, es posible seguir la actividad de un usuario durante su permanencia en la web.
3. **Queries**: Guarda cada consulta escrita por el usuario, incluyendo el número de términos y un identificador incremental. Esto permite analizar qué t
4. **Clicks**: Captura cada clic realizado sobre un documento de los resultados, indicando a qué query pertenece.
5. **FactClicks**: Un recuento acumulado por documento al que se ha dado clic. Esto es útil para detectar la relevancia de los productos.

### 4.1. Integración en la aplicación

Todas estas tablas se actualizan mediante llamadas desde `web_app.py.` Cada vez que ocurre un evento, la aplicación delega le registro a `analytics_data.py` (class AnalyticsData).

- En la página principal se genera o reconoce la sesión del usuario.
- En cada request se añade un registro con la ruta visitada y el navegador detectado.
- Cada vez que se realiza una búsqueda, se almacena la consulta como una nueva entrada.
- Cuando el usuario hace clic en un resultado, se incrementa el contador del documento y se guarda el evento.

### 4.2. Métrica adicional: análisis de la longitud de las queries

Además de los campos necesarios para registrar consultas y clics, guardamos la información adicional que consideramos útil para un análisis posterior. Por ejemplo, para cada consulta almacenamos el número de términos (`num_terms`). Este dato permite estudiar la longitud media de las búsquedas y nos permite distinguir entre consultas genéricas (”jacket”) y otras más específicas (”black leather jacket slim fit”).