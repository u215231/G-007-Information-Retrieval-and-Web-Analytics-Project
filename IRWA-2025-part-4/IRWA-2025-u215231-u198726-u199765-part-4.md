# Project Part 4 Report:
Information Retrieval And Web Analysis 2025

---

Date: 04/12/2025								 
Group Identifier: G_007									
Group Member 1: Marc Bosch Manzano u215231  
Group Member 2: Chris Matienzo Chilo u198726  
Group Member 3: Ã€lex Roger Moya u199765  

This file was edited with Markdown language.

---

## Index

[1. Introduction](#1-introduction)
[2. User Interface (UI)](#2-user-interface-ui)
[3. Retrieval Augmented Generation (RAG)](#3-retrieval-augmented-generation-rag)
[4. Web Analytics](#4-web-analytics)

## 1. Introduction

In this forth part of the project, instead of retrieving documents, we are focusing on building a functional web, a Retrieval-Augmented Generation (RAG) that summarizes the results information, and lastly, an analytics system that stores the user's interactions that visit the webpage.

The idea of this project was to mix this workflow in a cohesive way, that way when the user does a search: 


- System processes the search.
- Returns the indexed information.
- Generated a summary of the results.
- Registers every interaction.

This way, the application not only answers, but also retains valuable information for the web analysis.

## 2. User Interface (UI)

For the web interface we tried granting the user with the most relevant and coherent information for their search.

### 2.1. General UI structure

The application is organized in three main pages:

- **Home (`/`)**: The home page, where the user enters the query.
- **Results (`/search`)**: Shows the retrieved documents, ordered according to the ranking defined by the search engine. This is where is shown a summary of the results, generated through a RAG system
- **Document Details (`/doc_details`)**: When clicking a result, the user accesses a more detail view of the product, including:
    - Category
    - Title
    - Brand
    - Rating
    - Price
    - Discount
    - Description
    - Image product

### 2.2. User interaction flow

The user poses a query and recieves a set of documents accompanied by a generated summary (RAG). When a user accesses a document (`/doc_details`), it is registered as a click in the analytics system (Stats section), to later show the metrics of the users history.


## 3. **Retrieval-Augmented Generation (RAG)**

Once the search flow and interface were built, we incorporated the Retrieval-Augmented Generation module, which acts as a bridge between the engine results and a more natural response for the user. The idea is that the user does not have to read the descriptions (results), but rather generates a clear synthesis of the difference between the products and whether they really fit their search.

`----------------------TO BE COMPLETED...----------------------`

## 4. Web Analytics

The third part of this project consisted of an analytics system capable of observing how users interact with the search engine, tracking the queries made, which documents are of most interest, which server routes receive the most traffic, and how a session evolves from the moment the user arrives until they leave the web.

`analytics_data.py`: Stores the following information in memory:

1. **Request**: Registers every HTTP request that reaches the server, such as route, IP, browser, and timestamp. This table allows identifying which pages are visited the most and from which devices.
2. **Sessions**: Stores a unique identifier per session and its initial timestamp. In this way, it is possible to track a user's activity during their stay on the web.
3. **Queries**: Saves each query written by the user, including the number of terms and an incremental identifier. This allows analyzing what terms are used.
4. **Clicks**: Captures each click made on a result document, indicating which query it belongs to.
5. **FactClicks**: An accumulated count per document that has been clicked. This is useful for detecting product relevance.

### 4.1. Application Integration

All these tables are updated via calls from `web_app.py.` Whenever an event occurs, the application delegates the registration to `analytics_data.py` (class AnalyticsData).

On the main page, the user session is generated or recognized. In each request, a record is added with the visited route and the detected browser. Every time a search is performed, the query is stored as a new entry. When the user clicks on a result, the document counter is incremented and the event is saved.

### 4.2. Additional Metric: Query Length Analysis

In addition to the necessary fields to register queries and clicks, we save additional information that we consider useful for later analysis. For example, for each query, we store the number of terms (`num_terms`). This data allows studying the average length of searches and allows us to distinguish between generic queries ("jacket") and more specific ones ("black leather jacket slim fit").

## 5. Analytics Dashboard and Visualization

The analytics system is presented to users through a dashboard (`/dashboard` route) that visualizes key metrics and user behavior patterns.

### 5.1. Dashboard Components

The dashboard (`dashboard.html`) displays four main visualizations for data exploration:

1. **Number of Views Over Time** (`/plot_number_of_views`)
   - Tracks page visits across all routes
   - Shows traffic patterns and peak usage periods
   - Helps identify when users are most active

2. **Browser Statistics** (`/plot_browsers`)
   - Displays which browsers users employ (Chrome, Firefox, Safari, etc.)
   - Useful for ensuring cross-browser compatibility
   - Supports responsive design decisions

3. **Operating System Statistics** (`/plot_os`)
   - Shows distribution of user operating systems (Windows, macOS, Linux, etc.)
   - Informs mobile vs. desktop traffic ratios
   - Guides platform-specific optimization efforts

4. **Hourly Traffic Analysis** (`/plot_time`)
   - Analyzes traffic distribution by hour of day
   - Identifies peak usage hours
   - Supports server resource planning

### 5.2. Query Statistics Table

A structured table displays the most frequently searched terms:
- **Query Terms**: The exact search query entered by users
- **Times Searched**: Count of how many times each query has been performed
- Sorted by frequency to highlight popular search patterns

### 5.3. Additional Statistics Pages

**Stats Page** (`/stats` route): Provides detailed view of:
- **Document Clicks Ranking**: Top-clicked products with click counts
- **Request Logs**: Complete record of all HTTP requests with timestamp, route, IP, and browser info
- **Session Data**: User session tracking with session IDs and timestamps
- **Query Details**: All queries performed with term count and query ID
- **Click Events**: Detailed click history linking queries to documents
- **Dwell Time Metrics**: Time spent on document detail pages

